!function(){"use strict";var t={jquery:function(t){t.exports=jQuery}},n={};function e(a){var r=n[a];if(void 0!==r)return r.exports;var i=n[a]={exports:{}};return t[a](i,i.exports,e),i.exports}e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};!function(){e.r(a);var t=e("jquery"),n=e.n(t);function r(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var i=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.addButtons(),this.editingEvents(),this.saveEvents()}var e,a,i;return e=t,(a=[{key:"addButtons",value:function(){var t=n()("#rank_math_seo_details, #rank_math_title, #rank_math_description, #rank_math_image_alt, #rank_math_image_title");t.each((function(){var t=n()(this);t.append(' <a href=#" class="dashicons dashicons-edit" title="'+rankMath.bulkEditTitle+'"></a>'),t.wrapInner("<span/>"),t.append(' <span><a href="#" class="button button-primary button-small rank-math-column-save-all">'+rankMath.buttonSaveAll+'</a> <a href="#" class="button-link button-link-delete rank-math-column-cancel-all">'+rankMath.buttonCancel+"</a></span>")})),t.on("click",".dashicons-edit, .rank-math-column-cancel-all",(function(e){e.preventDefault();var a=n()(this).closest("th");n()(this).hasClass("rank-math-column-cancel-all")?(t.removeClass("bulk-editing"),n()(".rank-math-column-cancel","td.bulk-editing.dirty").trigger("click"),n()("td.bulk-editing").removeClass("bulk-editing")):(a.toggleClass("bulk-editing"),n()("td.column-"+a.attr("id")).toggleClass("bulk-editing"))}))}},{key:"editingEvents",value:function(){n()(".rank-math-column-value").on("input",(function(){var t=n()(this),e=t.closest("td");t.text()!==t.prev().text()?e.addClass("dirty"):e.removeClass("dirty")})).on("keypress",(function(t){if(13===t.keyCode)return n()(this).parent().find(".rank-math-column-save").trigger("click"),!1})),n()(".rank-math-column-cancel").on("click",(function(t){t.preventDefault();var e=n()(this).closest("td");e.removeClass("dirty");var a=e.find(".rank-math-column-value").prev(".rank-math-column-display");a.find("span").length&&(a=a.find("span")),e.find(".rank-math-column-value").text(a.text())}))}},{key:"saveEvents",value:function(){var t=this;n()(".rank-math-column-save-all").on("click",(function(e){e.preventDefault();var a=n()(this),r={},i=[];if(n()(".dirty.bulk-editing").each((function(){var t=n()(this),e=parseInt(t.closest("tr").attr("id").replace("post-","")),a=t.find(".rank-math-column-value");i.push(t),r[e]=r[e]||{},r[e][a.data("field")]=a.text()})),n().isEmptyObject(r))return n()(a.next()).trigger("click"),!0;t.save(r).done((function(e){e.success&&(i.forEach((function(n){t.setColumn(n)})),n()(a.next()).trigger("click"))}))})),n()(".rank-math-column-save").on("click",(function(e){e.preventDefault();var a=n()(this).closest(".dirty"),r=parseInt(a.closest("tr").attr("id").replace("post-","")),i=a.find(".rank-math-column-value"),o={};o[r]={},o[r][i.data("field")]=i.text(),t.save(o).done((function(n){n.success&&t.setColumn(a)}))}))}},{key:"setColumn",value:function(t){t.removeClass("dirty bulk-editing");var n=t.find(".rank-math-column-value").prev(".rank-math-column-display");n.find("span").length&&(n=n.find("span"));var e=document.createElement("div");e.innerHTML=t.find(".rank-math-column-value").text(),n.text(e.innerText)}},{key:"save",value:function(t){return n().ajax({url:rankMath.endpoint+"/updateMetaBulk",method:"POST",beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",rankMath.restNonce)},data:{rows:t}})}}])&&r(e.prototype,a),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();n()((function(){new i}))}()}();