!function(){"use strict";var e={"./assets/admin/src/helpers/addNotice.js":function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});var n=a("jquery"),r=a.n(n);function i(e,t,a,n){t=t||"error",n=n||!1;var i=r()('<div class="notice notice-'+t+' is-dismissible"><p>'+e+"</p></div>").hide();a.next(".notice").remove(),a.after(i),i.slideDown(),r()(document).trigger("wp-updates-notice-added"),n&&setTimeout((function(){i.fadeOut((function(){i.remove()}))}),n)}},"./assets/admin/src/helpers/ajax.js":function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});var n=a("jquery"),r=a.n(n);function i(e,t,a){return r().ajax({url:rankMath.ajaxurl,type:a||"POST",dataType:"json",data:r().extend(!0,{action:"rank_math_"+e,security:rankMath.security},t)})}},"./assets/admin/src/helpers/boxTabs.js":function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});var n=a("jquery"),r=a.n(n);function i(e){var t=e||".rank-math-box-tabs";r()(t).children().on("click",(function(e){e.preventDefault();var t=r()(this),a=t.attr("href").substr(1);t.addClass("active-tab").siblings().removeClass("active-tab"),r()("#"+a).addClass("active-tab").siblings().removeClass("active-tab")}))}},"./assets/admin/src/search-console.js":function(e,t,a){a.r(t),a.d(t,{searchConsole:function(){return l}});var n=a("jquery"),r=a.n(n),i=a("lodash"),o=a("./assets/admin/src/helpers/ajax.js"),s=a("@wordpress/i18n");function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.response=""}var t,a,n;return t=e,(a=[{key:"checkAll",value:function(){var e=this,t=r()("#setting-panel-analytics .cmb2-id-check-all-services:not(.done), #cmb2-metabox-rank-math-wizard .cmb2-id-check-all-services:not(.done)");t.length>0&&"0"===t.val()&&(t.addClass("done"),(0,o.default)("google_check_all_services").done((function(t){e.response=t,e.fillSelect(),e.accordions.removeClass("locked")})))}},{key:"events",value:function(){var e=this;this.saveChanges=!1,this.accountSelect=r()(".site-analytics-account"),this.profileSelect=r()(".site-console-profile"),this.propertySelect=r()(".site-analytics-property"),this.viewSelect=r()(".site-analytics-view"),this.adsenseSelect=r()(".site-adsense-account"),this.accordions=r()(".rank-math-accordion"),this.countryConsole=r()("#site-console-country"),this.countryAnalytics=r()("#site-analytics-country"),r()(".cmb2_select").on("select2:open",(function(){document.querySelector(".select2-search__field").focus()})),this.accountSelect.on("change",(function(){var t=parseInt(e.accountSelect.val());0!==t?e.fillPropertySelect(t):e.propertySelect.html('<option value="0">Select Property</option>')})),this.profileSelect.on("change",(function(){0!==parseInt(e.profileSelect.val())&&document.getElementById("enable-index-status").removeAttribute("disabled")})),r()([".rank-math-wizard-body--analytics .form-footer.rank-math-ui .button-primary",".rank-math_page_rank-math-options-general .form-footer.rank-math-ui .button-primary"].join(", ")).on("click",(function(t){e.submitButtonHandler(t)})),this.propertySelect.on("change",(function(){"create-ga4-property"!==e.propertySelect.val()?(e.response.type=(0,i.get)(e.response.accounts,[e.accountSelect.val(),"properties",e.propertySelect.val(),"type"],{}),"GA4"!==e.response.type&&(e.response.type="GA3",e.response.views=(0,i.get)(e.response.accounts,[e.accountSelect.val(),"properties",e.propertySelect.val(),"profiles"],{})),"GA4"===e.response.type?e.createNewDataStream():e.fillViewSelect()):e.createNewProperty()})),this.viewSelect.on("change",(function(e){var t=r()(e.target).find(":selected");t.data("measurement-id")&&(r()("#rank-math-analytics-measurement-id").val(t.data("measurement-id")),r()("#rank-math-analytics-stream-name").val(t.text()))})),r()(".rank-math-disconnect-google").on("click",(function(e){e.preventDefault(),confirm(rankMath.confirmDisconnect)&&(0,o.default)("disconnect_google").done((function(){window.location.reload()}))}))}},{key:"createNewProperty",value:function(){var e=this;confirm((0,s.__)("Are you sure, you want to create a new GA4 Property?","rank-math"))?(0,o.default)("create_ga4_property",{accountID:this.accountSelect.val()},"post").done((function(t){if(t.error)return e.propertySelect.val(e.propertySelect.find("option:first").val()),void alert(t.error);e.propertySelect.append('<option value="'+t.id+'">'+t.name+"</option>"),e.propertySelect.val(t.id),e.createNewDataStream(),e.response.type="GA4"})):this.propertySelect.val(this.propertySelect.find("option:first").val())}},{key:"createNewDataStream",value:function(){var e=this;this.viewSelect.html(""),this.viewSelect.prop("disabled",!0),(0,o.default)("get_ga4_data_streams",{propertyID:this.propertySelect.val()},"post").done((function(t){t.error?console.error(t.error):(e.response.views=t.streams,e.fillViewSelect(),e.viewSelect.trigger("change"))}))}},{key:"submitButtonHandler",value:function(e){var t=r()(e.target);e.preventDefault(),this.saveConsole(),this.saveAnalytics(),this.saveAdsense(),setTimeout((function(){t.off("click").trigger("click")}),100)}},{key:"saveConsole",value:function(){if(0!==parseInt(this.profileSelect.val())){var e={profile:this.profileSelect.val(),country:this.countryConsole.val(),enableIndexStatus:r()("#enable-index-status").is(":checked")},t=r()("#console_caching_control");t.length>0&&(e.days=t.val()),(0,o.default)("save_analytic_profile",e,"post")}}},{key:"saveAnalytics",value:function(){var e={accountID:this.accountSelect.val(),propertyID:this.propertySelect.val(),viewID:this.viewSelect.val(),country:this.countryAnalytics.val(),installCode:r()("#install-code").is(":checked"),anonymizeIP:r()("#anonymize-ip").is(":checked"),localGAJS:r()("#local-ga-js").is(":checked"),excludeLoggedin:r()("#exclude-loggedin").is(":checked"),measurementID:r()("#rank-math-analytics-measurement-id").val(),streamName:r()("#rank-math-analytics-stream-name").val()};if(0!==parseInt(e.accountID)&&0!==parseInt(e.propertyID)){var t=r()("#console_caching_control");t.length>0&&(e.days=t.val()),(0,o.default)("save_analytic_options",e,"post")}}},{key:"saveAdsense",value:function(){var e={accountID:this.adsenseSelect.val()};e.accountID&&(0,o.default)("save_adsense_account",e,"post")}},{key:"fillSelect",value:function(){var e=this,t=this.response,a=t.inSearchConsole,n=t.isVerified;this.fillProfileSelect(),this.fillAccountSelect(),this.fillAdsenseSelect(),a||(0,o.default)("add_site_console").done((function(t){e.response.sites=t.sites,e.fillProfileSelect()})),a&&!n&&(0,o.default)("verify_site_console"),this.saveChanges=!1}},{key:"fillAdsenseSelect",value:function(){var e=this,t=this.response.adsenseAccounts,a=void 0!==t&&t;!1!==a&&((0,i.map)(a,(function(t,a){e.adsenseSelect.append('<option value="'+a+'">'+t.name+"</option>")})),this.adsenseSelect.data("selected")&&this.adsenseSelect.val(this.adsenseSelect.data("selected")),this.adsenseSelect.prop("disabled",!1),this.adsenseSelect.select2())}},{key:"fillAccountSelect",value:function(){var e=this,t=this.response.accounts;(0,i.map)(t,(function(t,a){e.accountSelect.append('<option value="'+a+'">'+t.name+"</option>")})),this.accountSelect.data("selected")?this.accountSelect.val(this.accountSelect.data("selected")):(this.accountSelect.prop("disabled",!1),this.countryAnalytics.prop("disabled",!1),this.accountSelect.select2(),this.countryAnalytics.select2()),this.accountSelect.trigger("change")}},{key:"fillPropertySelect",value:function(e){var t=this,a=this.response,n=a.accounts,r=a.homeUrl,o=n[e].properties;this.propertySelect.html('<option value="0">Select Property</option>'),this.propertySelect.append('<option value="create-ga4-property">'+(0,s.__)("Create new GA4 Property","rank-math")+"</option>"),(0,i.map)(o,(function(e){var a=e.url===r?' selected="selected"':"";t.propertySelect.append("<option"+a+' value="'+e.id+'">'+e.name+"</option>")})),this.propertySelect.data("selected")?this.propertySelect.val(this.propertySelect.data("selected")):(this.propertySelect.prop("disabled",!1),this.propertySelect.select2()),this.propertySelect.trigger("change")}},{key:"fillProfileSelect",value:function(){var e=this,t=this.response,a=t.sites,n=t.homeUrl,r=!1;(0,i.map)(a,(function(t,a){r=a===n?' selected="selected"':"",e.profileSelect.append("<option"+r+' value="'+a+'">'+t+"</option>")})),this.profileSelect.data("selected")&&this.profileSelect.closest(".rank-math-accordion").addClass("connected"),this.profileSelect.prop("disabled",!1),this.countryConsole.prop("disabled",!1),this.profileSelect.select2(),this.countryConsole.select2()}},{key:"fillViewSelect",value:function(){var e=this,t=this.response,a=t.views,n="GA4"===t.type?(0,s.__)("Data Stream","rank-math"):(0,s.__)("View","rank-math");this.viewSelect.prev("label").text(n),(0,i.map)(a,(function(t){var a=(0,i.isUndefined)(t.measurementId)?"":t.measurementId;e.viewSelect.append('<option value="'+t.id+'" data-measurement-id="'+a+'">'+t.name+"</option>")})),this.viewSelect.data("selected")&&this.viewSelect.val(this.viewSelect.data("selected")),this.viewSelect.prop("disabled",!1),this.viewSelect.select2()}}])&&c(t.prototype,a),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())},jquery:function(e){e.exports=jQuery},lodash:function(e){e.exports=lodash},"@wordpress/i18n":function(e){e.exports=wp.i18n}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};!function(){a.r(n);var e,t=a("jquery"),r=a.n(t),i=a("@wordpress/i18n"),o=a("./assets/admin/src/helpers/ajax.js"),s=a("./assets/admin/src/helpers/addNotice.js"),c=a("./assets/admin/src/search-console.js"),l=a("./assets/admin/src/helpers/boxTabs.js");e=r(),String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(t,a){return void 0!==e[a]?e[a]:t}))}),String.prototype.trimRight=function(e){return void 0===e&&(e="s"),this.replace(new RegExp("["+e+"]+$"),"")},e((function(){window.rankMathAdmin={init:function(){this.misc(),this.tabs(),this.dependencyManager(),-1!==Object.values(window.rankMath.modules).indexOf("analytics")&&(c.searchConsole.events(),c.searchConsole.checkAll())},misc:function(){void 0!==r().fn.select2&&e("[data-s2]").select2(),e(".cmb-group-text-only,.cmb-group-fix-me").each((function(){var t=e(this),a=t.find(".cmb-repeatable-group"),n=a.find("> .cmb-row:eq(0) > .cmb-th");t.prepend('<div class="cmb-th"><label>'+n.find("h2").text()+"</label></div>"),a.find(".cmb-add-row").append('<span class="cmb2-metabox-description">'+n.find("p").text()+"</span>"),n.parent().remove()})),e(".rank-math-collapsible-trigger").on("click",(function(t){t.preventDefault();var a=e(this),n=e("#"+a.data("target"));a.toggleClass("open"),n.toggleClass("open")}));var t=e("#rank_math_rich_snippet"),a=t.find("option[value=review]"),n=t.val();a&&(a.prop("disabled",!0),"review"===n&&e(".cmb2-id-rank-math-review-schema-notice").removeClass("hidden"),t.on("change",(function(){null!==t.val()&&"review"!==t.val()&&e(".cmb2-id-rank-math-review-schema-notice").addClass("hidden")})))},searchConsole1:function(){var t=e(".cmb2-id-console-authorization-code"),a=e("#console_authorization_code"),n=e("#gsc-dp-info"),r=e("#console_profile"),c=r.parent().find(".rank-math-refresh"),l=a.parent(),d=e("body").hasClass("rank-math-wizard-body--analytics")?e("> p:first-of-type",".cmb-form"):e("h1",".rank-math-wrap-settings");l.on("click",".rank-math-deauthorize-account",(function(n){n.preventDefault();var l=e(this);if(l.prop("disabled",!0),a.data("authorized"))return(0,o.default)("search_console_deauthentication").always((function(){l.prop("disabled",!1)})).done((function(){a.val(""),a.show(),a.data("authorized",!1),t.removeClass("authorized").addClass("unauthorized"),l.html((0,i.__)("Authorize","rank-math")),r.prop("disabled",!0),c.prop("disabled",!0)})),!1;a.addClass("input-loading"),(0,o.default)("search_console_authentication",{code:a.val()}).always((function(){l.prop("disabled",!1),a.removeClass("input-loading")})).done((function(e){e&&!e.success&&(0,s.default)(e.error,"error",d),e&&e.success&&(a.hide(),a.data("authorized",!0),l.html("De-authorize Account"),c.trigger("click"),r.removeAttr("disabled"),t.removeClass("unauthorized authorizing").addClass("authorized"))}))})),r.on("change",(function(){null!==r.val()&&0===r.val().indexOf("sc-domain:")?n.removeClass("hidden"):n.addClass("hidden")})).change(),c.on("click",(function(t){t.preventDefault(),c.prop("disabled",!0),r.addClass("input-loading"),(0,o.default)("search_console_get_profiles").always((function(){c.prop("disabled",!1),e(".console-cache-update-manually").prop("disabled",!1),r.removeClass("input-loading")})).done((function(t){if(t&&!t.success&&(0,s.default)(t.error,"error",d),t&&t.success){var a=t.selected||r.val();r.html(""),e.each(t.profiles,(function(e,t){r.append('<option value="'+e+'">'+t+"</option>")})),r.val(a||Object.keys(t.profiles)[0]),c.removeClass("hidden")}}))}))},dependencyManager:function(){var t=this,a=e(".cmb-form, .rank-math-metabox-wrap");e(".cmb-repeat-group-wrap",a).each((function(){var t=e(this),a=t.next(".rank-math-cmb-dependency.hidden");a.length&&t.find("> .cmb-td").append(a)})),e(".rank-math-cmb-dependency",a).each((function(){t.loopDependencies(e(this))})),e("input, select",a).on("change",(function(){var a=e(this).attr("name");e('span[data-field="'+a+'"]').each((function(){t.loopDependencies(e(this).closest(".rank-math-cmb-dependency"))}))}))},checkDependency:function(e,t,a){return"string"==typeof t&&t.includes(",")&&"="===a?t.includes(e):"string"==typeof t&&t.includes(",")&&"!="===a?!t.includes(e):"="===a&&e===t||"=="===a&&e===t||">="===a&&e>=t||"<="===a&&e<=t||">"===a&&e>t||"<"===a&&e<t||"!="===a&&e!==t},loopDependencies:function(t){var a=this,n=t.data("relation"),r=null;t.find("span").each((function(){var t=e(this),i=e("[name='"+t.data("field")+"']"),o=i.val();i.is(":radio")&&(o=i.filter(":checked").val()),i.is(":checkbox")&&(o=i.filter(":checked").val());var s=a.checkDependency(o,t.data("value"),t.data("comparison"));if("or"===n&&s)return r=!0,!1;"and"===n&&(r=(null===r||r)&&s)}));var i=t.closest(".rank-math-cmb-group");i.length||(i=t.closest(".cmb-row")),r?i.slideDown(300):i.hide()},tabs:function(){(0,l.default)();var t=e(".rank-math-tabs-navigation");t.length&&t.each((function(){var a=e(this),n=a.closest(".rank-math-tabs"),r=e(">a",a),i=e(">.rank-math-tabs-content>.rank-math-tab",n),o=a.data("active-class")||"active",s=a.hasClass("before-header");r.on("click",(function(){var t=e(this),a=e(t.attr("href"));if(r.removeClass(o),i.hide(),s){var c=a.find(".cmb-type-title.tab-header").clone();c.addClass("before-header-title"),e(".before-header-title").remove(),n.prepend(c)}return t.addClass(o),a.show(),!1}));var c=window.location.hash||window.localStorage.getItem(n.attr("id"));null===c?r.eq(0).trigger("click"):(c=e('a[href="'+c+'"]',a)).length?c.trigger("click"):r.eq(0).trigger("click"),t.next().css("min-height",a.outerHeight())}))},variableInserter:function(t){var a=e("input[type=text], textarea",".rank-math-supports-variables");if(t=void 0===t||t,a.length){var n,r=this,o=e("body");if(a.attr("autocomplete","off"),a.wrap('<div class="rank-math-variables-wrap"/>'),e(".rank-math-variables-wrap").append('<a href="#" class="rank-math-variables-button button button-secondary"><span class="dashicons dashicons-arrow-down-alt2"></span></a>'),t){var s=rankMath.capitalizeTitle?"capitalize":"";e(".rank-math-variables-wrap").after('<div class="rank-math-variables-preview '+s+'" data-title="'+(0,i.__)("Example","rank-math")+'"/>'),a.on("rank_math_variable_change input",(function(t){var a=e(t.currentTarget),n=r.replaceVariables(a.val());60<n.length&&0<=a.attr("name").indexOf("title")?n=n.substring(0,60)+"...":160<n.length&&0<=a.attr("name").indexOf("description")&&(n=n.substring(0,160)+"...");var i=e("<textarea/>").html(n).val();a.parent().next(".rank-math-variables-preview").text(i)})),a.trigger("rank_math_variable_change")}var c=e("<ul/>"),l=e('<div class="rank-math-variables-dropdown"><input type="text" placeholder="'+(0,i.__)("Search &hellip;","rank-math")+'"></div>');e.each(rankMath.variables,(function(){c.append('<li data-var="%'+this.variable+'%" data-example="'+this.example+'"><strong>'+this.name+"</strong><span>"+this.description+"</span></li>")})),l.append(c),e(".rank-math-variables-wrap:eq(0)").append(l);var d=e(".rank-math-variables-button, .rank-math-variables-button *, .rank-math-variables-dropdown, .rank-math-variables-dropdown *");o.on("click",(function(t){e(t.target).is(d)||v()}));var p=l.find("input"),u=l.find("li");o.on("click",".rank-math-variables-button",(function(t){t.preventDefault();var a=e(this);a.after(l),u.show(),void 0!==(n=a.prev().data("exclude-variables"))&&(n=n.split(","),h()),l.show(),p.val("").focus()})),l.on("click","li",(function(t){t.preventDefault();var a=e(this),n=a.closest(".rank-math-variables-wrap").find("input,textarea");n.val(e.trim(n.val())+" "+a.data("var")),n.trigger("rank_math_variable_change").trigger("input"),v()})),l.on("keyup","input",(function(t){t.preventDefault();var a=e(this).val().toLowerCase();if(2>a.length)return u.show(),void h();u.hide().each((function(){var t=e(this);-1!==t.text().toLowerCase().indexOf(a)&&t.show()})),h()}))}function h(){void 0!==n&&n.forEach((function(e){l.find('[data-var="%'+e+'%"]').hide()}))}function v(){n=void 0,l.hide()}},replaceVariables:function(t){return e.each(rankMath.variables,(function(e){if(!this.example)return!0;var a=new RegExp("\\([a-z]+\\)","g");e=e.replace(a,"\\(.*?\\)"),t=t.replace(new RegExp("%+"+e+"%+","g"),this.example)})),t}},window.rankMathAdmin.init()}))}()}();